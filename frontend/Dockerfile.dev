# â³ 1ï¸âƒ£ Base image
FROM node:20-alpine

# ğŸ—‚ï¸ set workdir
WORKDIR /app

# enable Yarn via corepack
RUN corepack enable

# ğŸ“‹ install deps
COPY package.json yarn.lock ./
RUN yarn install --frozen-lockfile --non-interactive

# ğŸ‘€ enable file-watch polling (often necessary in Docker)
ENV CHOKIDAR_USEPOLLING=true
ENV CHOKIDAR_INTERVAL=100

# ğŸ” mount your source in docker-compose so edits show up
#    and keep node_modules inside the container
VOLUME [ "/app/node_modules" ]

# ğŸ“‚ copy everything else
COPY . .

# ğŸŒ expose Vite's default dev port
EXPOSE 5173

# â–¶ï¸ run the Vite dev server on 0.0.0.0 so itâ€™s reachable
CMD [ "yarn", "dev", "--host", "0.0.0.0" ]
